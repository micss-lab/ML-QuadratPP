/*
 * generated by Xtext 2.10.0
 */
package org.thingml.xtext.validation

import org.eclipse.xtext.validation.Check
import org.thingml.xtext.helpers.IncludeCycle
import org.thingml.xtext.helpers.ThingHelper
import org.thingml.xtext.thingML.Thing
import org.thingml.xtext.thingML.ThingMLPackage
import org.thingml.xtext.constraints.ThingMLHelpers

/**
 * This class contains custom validation rules. 
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class ThingMLValidator extends AbstractThingMLValidator {

	@Check
	def checkNoCyclesInThingIncludes(Thing thing) {
		try {
			ThingHelper.allIncludedThingsWithCheck(thing)
			ThingMLHelpers.allThingFragmentsWithCheck(thing)
		} catch (IncludeCycle e) {
			error(e.message, thing, ThingMLPackage.eINSTANCE.thing_Includes);
			return;
		}
	}

}
